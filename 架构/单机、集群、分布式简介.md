# 单机、集群、分布式简介

## 1. 理解

```
集群: 统一个业务在多台机器上运行(多个人在一起做相同的事情)
分布式: 一个业务拆分成多个子业务，部署在多台机器上(多个人一起做不同的事情)
```

## 2. 概念

### 2.1 单机架构

```
一个业务量很小的系统，所有的代码都可以放在一个项目中，然后这个项目部署在一台机器上。
整个项目所有的服务都由这台机器提供，这就是单机架构。
单机架构的特点：
  单机的处理能力有限，当业务增长到一定的程度的时候，单机的硬件资源将无法满足业务的需求。---> 集群
```

### 2.2 集群架构

<img src="/Users/jiangxiaolong/自学整理/架构/image/集群架构.webp" alt="集群架构" style="zoom:100%;" />

```
单机处理达到瓶颈的时候，工程师就把单机赋值几份，这样就构成了一个集群。集群中每台服务器就叫做这个集群的一个节点。所有的节点构成了一个集群。每个节点都提供相同的服务，那么系统的处理能力就相当于提升了好几倍
```

#### 2.2.1 负载均衡

```
问题是用户的请求究竟有哪个节点来处理呢？
最好能够让此时此刻负载较小的节点来处理，这样使得每个节点的压力都比较平衡。
要实现这个功能，就需要在所有的节点之前增加一个‘调度者’的角色，用户所有的请求都交个他，
然后他根据当前所有的节点负载的情况，决定将这个请求交给那个节点去处理。这个‘调度器’就是负载均衡
```

#### 2.2.2 特点

```
集群架构的好处就是系统易于扩展。如果随着系统业务的发展，当前的系统又支撑不住了，那么给这个集群在增加节点就行了。
但是，当业务发展发到一定程度的时候，会产生一个问题-->无论怎么增加节点，整个集群的性能的提升并不明显了，这个时候，就需要使用微服务结构了。
```

### 2.3 分布式架构

```
从单结构到集群架构，业务代码基本不需要做任何的修改，工程师要做的仅仅是多部署几台服务器，每台服务器上运行相同的代码就行了。
但是，从集群架构演进到微服务架构，之前的代码就需要发生较大的改动。所以对于新系统，系统设计之初就需要采用微服务架构，
这样后期运维的成本更低。但如果一套老系统需要升级成微服务结构的话，那就得对代码大动干戈了。
所以，对于老系统而言，究竟是继续保持集群模式，还是升级成微服务架构，这就需要架构师深思熟虑、权衡投入产出。
```

```
分布式架构就是将一个完成的系统，按照业务功能，拆分成一个个独立的子系统。
在分布式结构中，每个子系统被称之为‘服务’。这些子系统能够独立运行在web容器中， 他们之前通过RPC(https....)方式通信
```

#### 2.3.1 分布式架构优点

```
1. 系统之前的耦合度大大降低，可以独立开发、独立部署、独立测试，系统与系统之间的边界非常明确，拍错也变得相当容易，开发效率大大提升。

2. 系统之间的耦合度降低，从而系统更易于扩展，可以针对性地扩展某些服务。

3. 服务的复用性更高。比如，将用户系统作为单独的服务后，该公司所有的产品都可以使用该系统作为用户系统，无需重复开发。
```

## 3. 区别与联系

```
1. 集群主要的使用场景是为了分担请求的压力，也就是在几个服务器上部署相同的应用程序，来分担客户端请求。

2. 分布式是指多个系统协同合作完成一个特定任务的系统。分布式是解决中心化管理的问题，如果把所有的任务叠加到一个节点处理，太慢了。
	 所以把一个大的问题拆分为多个小的问题，并分别解决，最总协同合作。分布式的主要工作就是分解任务，将职能拆解。
	
3. 集群主要是简单加机器解决问题，对于问题本身是不做任何分解。
```

```
分布式处理必然包含任务分解和答案的归并。分布式中的某个子任务系统，可能由一个集群来代替，集群中人一个节点，都是做一个完成的任务。

集群个分布式都是由多个节点组成，但是集群之间的通信协调基本不需要，而分布式各个节点的通信协调必不可少

将一套系统拆分成不同子系统部署在不同的服务器上，这叫分布式
然后部署多个相同的子系统在不同的服务器上，这叫集群。
部署在不同服务器上的同一个字系统，叫做负载均衡。
```

